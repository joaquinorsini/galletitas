<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section class="hero">
        <header>
            <ul class="menu">
                <li class="menu_home"><a href="index.html">Home</a></li>
                <li class="menu_prod"><a href="productos.html">Productos</a></li>
                <li class="menu_cont"><a href="#contacto">Contacto</a></li>
            </ul>
            <div class="search-container">
                <div class="searcher">
                    <input type="text" name="" id="searcher_input">
                    <img src="imgs/buscar.png" alt="icono_buscar" id="ic_buscar">
                </div>
            
                <div class="btn-cart">
                    <img src="imgs/carrito-de-compras.png" alt="icono_carrito" id="ic_carro">
                </div>
            </div>    
        </header>

        <div id="cart-dropdown" class="cart-dropdown">
            <h4>Carrito anashe</h4>
            <ul id="cart-items">
                <div id="cart-dropdown" class="cart-dropdown">
                    <h4>Carrito anashe</h4>
                    <ul id="cart-items">
                  
                    </ul>
                    <button id="buy-button" class="buy-button">Buy Now</button>
                </div>
            
            </ul>
        </div>

        <div class="hero-text-container">
            <h1 class="hero-h1">Las Mejores Galletitas del País<br> <p class="hero-h3">Cookie-Store</p> </h1>
        </div>
    </section>
    <section class="s2">   
        <h4 class="s2-title">Favoritas del Públic</h4>
        <div class="s2-container">
            <div class="s2-prod-1">
                <img src="imgs/oreo.jpg" alt="oreo" class="s2-img">
                <h5 class="s2-cookie">Oreo</h5>
                <p class="s2-price">$1.050</p>
                <div class="btn-añadir" onclick="addToCart('Oreo', 1050)">
                    <p class="s2-btn-añadir-p">Añadir al Carrito</p>
                </div>
            </div>
            <div class="s2-prod-2">
                <img src="imgs/granix.webp" alt="granix" class="s2-img">
                <h5 class="s2-cookie">Granix Sandwich</h5>
                <p class="s2-price">$840</p>
                <div class="btn-añadir" onclick="addToCart('Granix Sandwich', 840)">
                    <p class="s2-btn-añadir-p">Añadir al Carrito</p>
                </div>
            </div>
            <div class="s2-prod-3">
                <img src="imgs/chocolinas.jpg" alt="chocolinas" class="s2-img">
                <h5 class="s2-cookie">Chocolinas</h5>
                <p class="s2-price">$900</p>
                <div class="btn-añadir" onclick="addToCart('Chocolinas', 900)">
                    <p class="s2-btn-añadir-p">Añadir al Carrito</p>
                </div>
            </div>
        </div>
    </section>
    <section class="s3">   
        <h4 class="s3-title">Opciones Dulces</h4>
        <div class="s3-container">
            <div class="s2-prod-1">
                <img src="imgs/diversion.jpg" alt="diversion" class="s3-img">
                <h5 class="s3-cookie">Surtido Diversión</h5>
                <p class="s3-price">$1.500</p>
                <div class="btn-añadir" onclick="addToCart('Surtido Diversión', 1500)">
                    <p class="s3-btn-añadir-p">Añadir al Carrito</p>
                </div>
            </div>
            <div class="s3-prod-2">
                <img src="imgs/pepitos.jpg" alt="pepitos" class="s3-img">
                <h5 class="s3-cookie">Pepitos</h5>
                <p class="s3-price">$1.100</p>
                <div class="btn-añadir" onclick="addToCart('Pepitos', 1100)">
                    <p class="s3-btn-añadir-p">Añadir al Carrito</p>
                </div>
            </div>
            <div class="s3-prod-3">
                <img src="imgs/rumba.jpg" alt="rumba" class="s3-img">
                <h5 class="s3-cookie">Rumba</h5>
                <p class="s3-price">$840</p>
                <div class="btn-añadir" onclick="addToCart('Rumba', 840)">
                    <p class="s3-btn-añadir-p">Añadir al Carrito</p>
                </div>
            </div>
            <div class="s3-prod-4">
                <img src="imgs/opera.jpg" alt="opera" class="s3-img">
                <h5 class="s3-cookie">Opera</h5>
                <p class="s3-price">$520</p>
                <div class="btn-añadir" onclick="addToCart('Opera', 520)">
                    <p class="s3-btn-añadir-p">Añadir al Carrito</p>
                </div>
            </div>
            <div class="s3-prod-5">
                <img src="imgs/toddy.jpg" alt="toddy" class="s3-img">
                <h5 class="s3-cookie">Toddy</h5>
                <p class="s3-price">$1.400</p>
                <div class="btn-añadir" onclick="addToCart('Toddy', 1400)">
                    <p class="s3-btn-añadir-p">Añadir al Carrito</p>
                </div>
            </div>
        </div>
    </section>
    <section class="s4" id="contacto">
        <h5 class="s4-title">Contacto</h5>
        <form class="s4-form">
            <div class="form-container">
                <input class="s4-form-name" type="text" placeholder="Nombre Completo">
                <input class="s4-form-email" type="text" placeholder="Email">
                <input class="s4-form-text" type="text" placeholder="Cuentenos su Problema">
                <input type="submit" class="s4-form-submit">
            </div>    
        </form>
    </section>
    <script>
        document.getElementById('ic_carro').addEventListener('click', function(event) {
            event.preventDefault();
            toggleCartDropdown();
        });

        document.getElementById('ic_buscar').addEventListener('click', function(event) {
            event.preventDefault();
            searchProducts();
        });

        document.getElementById('contact-form').addEventListener('submit', function(event) {
            event.preventDefault();

            var templateParams = {
                name: document.getElementById('contact-name').value,
                email: document.getElementById('contact-email').value,
                message: document.getElementById('contact-message').value
            };

            emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams)
                .then(function(response) {
                   console.log('god', response.status, response.text);
                   alert('se envio, god');
                }, function(error) {
                   console.log('FAILED...', error);
                   alert('Algo hiciste mal capo');
                });
        });

        document.getElementById('buy-button').addEventListener('click', function() {
            buyItems();
        });

        function toggleCartDropdown() {
            var cartDropdown = document.getElementById('cart-dropdown');
            if (cartDropdown.style.display === 'none' || cartDropdown.style.display === '') {
                cartDropdown.style.display = 'block';
            } else {
                cartDropdown.style.display = 'none';
            }
        }

        function addToCart(productName, productPrice) {
            var cartItems = document.getElementById('cart-items');
            var newItem = document.createElement('li');
            newItem.textContent = productName + ' - $' + productPrice;

            var deleteButton = document.createElement('button');
            deleteButton.textContent = 'Remove';
            deleteButton.style.marginLeft = '10px';
            deleteButton.addEventListener('click', function() {
                removeFromCart(newItem);
            });

            newItem.appendChild(deleteButton);
            cartItems.appendChild(newItem);
        }

        function removeFromCart(cartItem) {
            var cartItems = document.getElementById('cart-items');
            cartItems.removeChild(cartItem);
        }

        function searchProducts() {
            var input = document.getElementById('searcher_input').value.toLowerCase();
            var productNames = document.querySelectorAll('.s2-cookie');

            productNames.forEach(function(product) {
                var productName = product.textContent.toLowerCase();
                var productContainer = product.parentElement;

                if (productName.includes(input)) {
                    productContainer.style.display = 'block';
                } else {
                    productContainer.style.display = 'none';
                }
            });
        }

        function buyItems() {
            var cartItems = document.getElementById('cart-items');
            var items = cartItems.getElementsByTagName('li');
            var itemList = [];
            
            for (var i = 0; i < items.length; i++) {
                itemList.push(items[i].textContent.replace(' Remove', ''));
            }

            if (itemList.length > 0) {
                alert('You have purchased: ' + itemList.join(', '));
              
                cartItems.innerHTML = '';
            } else {
                alert('Your cart is empty.');
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('cart-dropdown').style.display = 'none';
        });
    </script>
</body>
</html>
